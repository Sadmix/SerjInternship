У меня совсем не работает: при любом действии сваливается в бесконечный цикл
Посмотри, все ли правильно в функции getop